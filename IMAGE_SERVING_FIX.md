# ๐ผ๏ธ ุญู ูุดููุฉ ุนุฑุถ ุงูุตูุฑ ูุงููููุงุช

## ุงููุดููุฉ

ุงููููุงุช ูุงูุตูุฑ ุงูุชู ูุชู ุฑูุนูุง ุชูุญูุธ ูู:
```
storage/app/public/logos/
storage/app/public/profile-pictures/
storage/app/public/social-case-documents/
```

ููู ูุง ุชุธูุฑ ุนูุฏ ูุญุงููุฉ ุนุฑุถูุง!

---

## ุงูุณุจุจ

ุนูู ุงูู Shared Hosting:
1. โ ูุง ูุฏุนู `symlink` (ุงููุตูุงุช ุงูุฑูุฒูุฉ)
2. โ ูุง ูุณูุญ ุจู `exec()` function
3. โ ูุง ูููู ุชุดุบูู `php artisan storage:link`

ุงููููุงุช ูุญููุธุฉ ููู ุงููุชุตูุญ ูุง ูุณุชุทูุน ุงููุตูู ุฅูููุง!

---

## ุงูุญู ุงููุทุจู

ุชู ุฅูุดุงุก ูุธุงู "File Server" ูุชููู ุชูุฒูุน ุงููููุงุช:

### 1. **public/storage/index.php**
- ููู PHP ููุฑุฃ ุงููููุงุช ูู `storage/app/public/`
- ูุชุญูู ูู ุงูุฃูุงู (ููุน directory traversal)
- ูุฑุณู ุงูููู ูููุชุตูุญ ุจุฑุฃุณ HTTP ุตุญูุญ
- ูุฏุนู ูู ุฃููุงุน ุงููููุงุช ูุงูุตูุฑ

### 2. **public/storage/.htaccess**
```apache
RewriteRule ^(.*)$ index.php?file=$1 [QSA,L]
```
ูุนูุฏ ุชูุฌูู ุฌููุน ุงูุทูุจุงุช ูู `index.php`

### 3. **public/storage/serve.php** (ุงุญุชูุงุทู)
ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ุญุงูุฉ ุนุฏู ุนูู `index.php`

---

## ููููุฉ ุงูุนูู

### ุนูุฏ ุฑูุน ุตูุฑุฉ:

```
1. ุงููุณุชุฎุฏู ูุฑูุน ุตูุฑุฉ ูู ุงููููุน
2. ูุชู ุญูุธูุง ูู: storage/app/public/logos/abc123.png
3. ุงููุณุงุฑ ููุญูุธ ูู DB: "logos/abc123.png"
```

### ุนูุฏ ุนุฑุถ ุงูุตูุฑุฉ:

```html
<img src="{{ asset('storage/logos/abc123.png') }}" />
<!-- ููุชุฌ: -->
<img src="/storage/logos/abc123.png" />
```

### ุฑุญูุฉ ุงูุทูุจ:

```
1. ุงููุชุตูุญ ูุทูุจ: /storage/logos/abc123.png
2. .htaccess ูุนูุฏ ุงูุชูุฌูู ุฅูู: index.php?file=logos/abc123.png
3. index.php ููุฑุฃ ูู: storage/app/public/logos/abc123.png
4. ูุฑุณู ุงูููู ูููุชุตูุญ
```

---

## ๐ ุงูุฃูุงู

ุงูุญู ูุดูู ุนุฏุฉ ุทุจูุงุช ุฃูุงู:

1. โ **ุงูุชุญูู ูู ุงูููู**
   - ุงูุชุญูู ูู ูุฌูุฏ ุงูููู
   - ููุน ุงููููุงุช ุบูุฑ ุงูููุฌูุฏุฉ

2. โ **ููุน Directory Traversal**
   - ุชูุธูู ุงููุณุงุฑุงุช (`..` ููุญุฐู)
   - ุงูุชุญูู ูู ุฃู ุงูููู ุฏุงุฎู storage ููุท

3. โ **ุตูุงุญูุงุช ุงูููู**
   - ุงุณุชุฎุฏุงู `chmod 644` ูููููุงุช
   - ุงุณุชุฎุฏุงู `chmod 755` ูููุฌูุฏุงุช

---

## ๐ ุงูุจููุฉ

```
public/
โโโ storage/
โ   โโโ index.php        โ ุงูููู ุงูุฑุฆูุณู (ูุฎุฏู ุงููููุงุช)
โ   โโโ serve.php        โ ุงุญุชูุงุทู
โ   โโโ .htaccess        โ ุชูุฌูู ุงูุทูุจุงุช
โ   โโโ logos/          (ุฑุงุจุท/ูุฌูุฏ)
โ   โโโ profile-pictures/ (ุฑุงุจุท/ูุฌูุฏ)
โ   โโโ social-case-documents/ (ุฑุงุจุท/ูุฌูุฏ)

storage/app/public/
โโโ logos/              โ ุงููููุงุช ุงููุนููุฉ
โโโ profile-pictures/   โ ุงููููุงุช ุงููุนููุฉ
โโโ social-case-documents/ โ ุงููููุงุช ุงููุนููุฉ
```

---

## โ ุงููููุงุช ุงููุฏุนููุฉ

### ุงูุตูุฑ
- `*.jpg` / `*.jpeg`
- `*.png`
- `*.gif`
- `*.webp`
- `*.svg`

### ุงููุณุชูุฏุงุช
- `*.pdf`
- `*.doc` / `*.docx`
- `*.xls` / `*.xlsx`
- `*.zip`
- `*.txt`

### ุงููุณุงุฆุท
- `*.mp4`
- `*.mp3`

---

## ๐ ุจุนุฏ ุงูุฑูุน ุนูู Hosting

### ุงูุชุญูู ูู ุฃู ุงููููุงุช ุชุนูู:

1. **ุงุฑูุน ุตูุฑุฉ ูู Settings**
   ```
   /settings โ ุฑูุน ุดุนุงุฑ ุงูุดุฑูุฉ
   ```

2. **ุงูุญุต ูู ุงูุจุฑุงูุฒุฑ**
   ```
   https://charity.masarsoft.io/storage/logos/your-image.png
   ```

3. **ูุฌุจ ุฃู ุชุฑู ุงูุตูุฑุฉ!**
   - ุฅุฐุง ุดูุช ุงูุตูุฑุฉ โ โ ููุชุงุฒ!
   - ุฅุฐุง ุดูุช 404 โ ุชุญูู ูู ุงูุฃุฐููุงุช

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: 404 Not Found

```bash
# ุชุญูู ูู:
1. mkdir -p storage/app/public/{logos,profile-pictures,social-case-documents}
2. chmod -R 755 storage/app/public/
3. ุชุฃูุฏ ูู ูุฌูุฏ public/storage/index.php
```

### ูุดููุฉ: 403 Forbidden

```bash
# ุชุญูู ูู ุงูุฃุฐููุงุช
chmod 755 storage/app/public/
chmod 755 public/storage/
ls -la storage/app/public/
```

### ูุดููุฉ: ุงูููู ูุง ููุฒู

```bash
# ุงูุญุต log ุงูุฃุฎุทุงุก
tail -f storage/logs/laravel.log
```

---

## ๐ ุงูุฃุฏุงุก

ุงูุญู ูุญุณูู ููุฃุฏุงุก:

- โ **Caching Headers**
  ```
  Cache-Control: public, max-age=3600
  Expires: <valid date>
  ```

- โ **Direct File Serving**
  - ุจุฏูู ูุฑูุฑ ุจู Laravel
  - ุงุณุชุฎุฏุงู `readfile()` ุงูุฃุตููุฉ

- โ **Path Optimization**
  - ุญุฏ ุฃุฏูู ูู ุงููุนุงูุฌุฉ
  - ุจุญุซ ูุจุงุดุฑ ุนู ุงูููู

---

## ๐ ุงููุฌุฑุฉ ูู Symlink

ุฅุฐุง ููุช ุชุณุชุฎุฏู symlink ูุญููุงู:

```bash
# ุนูู Local Development
rm public/storage
# ุงูุขู ุณูุณุชุฎุฏู ุงูุญู ุงูุฌุฏูุฏ ุชููุงุฆูุงู

# ุนูู Production (shared hosting)
# ุงูุญู ุงูุฌุฏูุฏ ูุนูู ุจุฏูู ุฃู ุชุนุฏููุงุช
```

---

## ๐ ุงูููุงุญุธุงุช ุงููุงูุฉ

### ุนูู Production:
- ูุง ุชุดุบูู `php artisan storage:link`
- ุงููููุงุช ุณุชูุฎุฏู ุชููุงุฆูุงู ุนุจุฑ `index.php`
- ุชุฃูุฏ ูู ุงูุฃุฐููุงุช: `755` ูููุฌูุฏุงุช

### ุนูู Local Development:
- ุชุณุชุทูุน ุงุณุชุฎุฏุงู symlink ุฅุฐุง ุฃุฑุฏุช
- ุฃู ุงุณุชุฎุฏู ุงูุญู ุงูุฌุฏูุฏ (ูุนูู ุนูู ุงูุงุซููู)

---

## ๐ฏ ุงูุฎูุงุตุฉ

โ **ุงูุญู ูุฏุนู:**
- Shared Hosting (ุจุฏูู symlink)
- Dedicated Hosting (ูุน ุฃู ุจุฏูู symlink)
- Local Development

โ **ุงูุฃูุงู:**
- ุญูุงูุฉ ูู directory traversal
- ุชุญูู ูู ุตูุงุญูุงุช ุงูููู
- ูุนุงูุฌุฉ ุขููุฉ ูููุณุงุฑุงุช

โ **ุงูุฃุฏุงุก:**
- ุงุณุชุฎุฏุงู caching headers
- ุจุฏูู ูุฑูุฑ ุจู Laravel
- ุฃุณุฑุน ูู symlink ูู ุจุนุถ ุงูุญุงูุงุช

---

## ๐ ุงููููุงุช ุฐุงุช ุงูุตูุฉ

- `public/storage/index.php` - ุงูููู ุงูุฑุฆูุณู
- `public/storage/serve.php` - ุงูุงุญุชูุงุทู
- `public/storage/.htaccess` - ุงูุชูุฌูู
- `app/Http/Controllers/SettingsController.php` - ุญูุธ ุงูุดุนุงุฑ
- `app/Http/Controllers/ProfileController.php` - ุญูุธ ุตูุฑุฉ ุงููุณุชุฎุฏู

---

**ุขุฎุฑ ุชุญุฏูุซ: 2026-02-01**

**ุงูุญู ูุนูู ุนูู:** Local + Production โ
